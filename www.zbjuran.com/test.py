#-*-coding:utf-8-*-
# Time:2017/9/25 20:41
# Author:YangYangJun

'''
POST https://hsb.jd.com/compute HTTP/1.1
Host: hsb.jd.com
Connection: keep-alive
Content-Length: 1628
Accept: application/json, text/plain, */*
Origin: https://huishou.m.jd.com
User-Agent: Mozilla/5.0 (Linux; Android 9; BKL-AL00 Build/HUAWEIBKL-AL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/66.0.3359.126 MQQBrowser/6.2 TBS/044506 Mobile Safari/537.36 MMWEBID/2835 MicroMessenger/7.0.3.1400(0x2700033B) Process/tools NetType/WIFI Language/zh_CN
Content-Type: application/x-www-form-urlencoded
Referer: https://huishou.m.jd.com/orderInfo?pid=153936&inquiryRelType=1&vid=200101&wid=17726&vender=1
Accept-Encoding: gzip, deflate, br
Accept-Language: zh-CN,en-US;q=0.9
Cookie: __jda=122270672.15533273448722125498609.1553327344.1553327344.1553327344.1; __jdv=122270672|direct|-|none|-|1553327344874; __jdc=122270672; mba_muid=15533273448722125498609; refer_v=real-url; rurl=%2F%2Fwq.jd.com%2Fpinbind%2FpinTokenRedirect%3Ftype%3D1%26biz%3Dhuishou%26rurl%3Dhttps%253A%252F%252Fhuishou.m.jd.com%252ForderInfo%253Fpid%253D153936%2526inquiryRelType%253D1%2526vid%253D200101%2526wid%253D17726%2526vender%253D1%26scope%3D0%26sceneid%3D9001%26btnTips%3D%26hideApp%3D0; TrackID=KAhoZ7OV8vSM9GktY5be8UW1a6poShZDW7jqr-6m_ROC1SKhkEFYIlik8GT_ELLeIyPZI0cgUtjNCP3DMX5FHqnqO2W2ttLZZ2giuCbWixmcuUYYEtOfplyJ99p3KRs7pCRqKPmksJe-KBQPe-Ygtw; buy_uin=4890942622; jdpin=gaussgao; nickname_base64=6auY5pav; open_id=oTGnpnJNfKi0gWEhHPdT7pUBKQZ8; openid2=2569931EA1803F2135F857BC19629B005A0C928D07BA15B45649A5DD2FACD8C27D33246E7214A3B63D0DCDC3D0801CF1; picture_url=http%3A%2F%2Fthirdwx.qlogo.cn%2Fmmopen%2FywQD5Z4f8lyk4wXnJZGKlszOkSdC4oZBIYPGucouEQDCqBozH2nEWdoicv9kyRd80CqRJXUibREibqTF0U2OB6tib3zkH0Wmmv7M%2F132; pin=gaussgao; pinId=aQ8ynUfDlrC1ffsfn98I-w; pinsign=d7c484dc119202db30e4b93dc7fa7432; sex=1; wq_skey=za4C9C52E4EB1177449013CEC85D3153F62E174F48C68F8937C55D1740CEACF6CE0838E8EB5D51ED980B9A848512BF1B6B731B867E1D297EE1ACF52F9483D3F762372982D8A5D7F49627877902F7EED8A7; wq_uin=4890942622; wq_unionid=oCwKwuL_vxklKc1NEdYbcRr3wOQM; wx_nickname=%E9%AB%98%E6%96%AF; wq_auth_token=49003881B187EDFBEA9E395D97D5AEF9D47C7A5DB1D143F7E1E2766D6A92DE44; __jdb=122270672.4.15533273448722125498609|1.1553327344; mba_sid=15533273448778307191229631115.4; 3AB9D23F7A4B3C9B=NQ3KOA4FQ3XMPTW76YNNEYB5X3F564ET6VLP5TQLFRCDS342LPHNZ464MLAANP2FMMDNEYPTE3GALXX54HJREHYWNQ
X-Requested-With: com.tencent.mm

attr=742-3800-1%2C315-2021-1%2C314-2014-1%2C456-2452-1%2C333-2072-1%2C316-2026-2%2C343-2100-2%2C352-2124-2%2C351-2118-2%2C350-2114-2%2C332-2067-2%2C580-3168-4%2C353-2130-4%2C355-2134-4%2C1279-6982-4%2C325-2045-4%2C344-2102-4%2C345-2104-4%2C347-2108-4%2C1268-6947-4%2C529-2808-4&pid=153936&vid=200101&inquiryRelType=1&wid=17726&inquiryKey=&token=%7B%22token%22%3A%22ffdb3fba9e654173939321923b8a8e56-7kmm-UEFJ~DnoMR0AOSXdYA0NKcnNcZ1l6EG4RFlFnSh5YDB4zS39XPkQdQFIbZ1IQGEx0IAtxFGFWAQENCiQLAR9MdXRcd0xsVFdQBgl0DAAJCXB6BC5EKkQdQEE0IEoIWCEdYTVnWQREVz4WRx40EElMcR9LaSl6UAVaaElpNBBJTHEfS2kpelAFWmhJaTQQDxQlJg8sGz0CbUAYN2cdXB4fJyoHIBEERB0%2BFlsZSh4mWHEfS2kpelUHUmhJaTQQTUhxH0tpKXpVB1JoSWk0EE1IcR9LGFkDOhMYXEYGJm5YVh1hHCsRPQBYDFEPGUoeJlg0LQ0gEzEIVAZoSWk0EA8UJSYPLBs9Am1AGDdnHVweHycqByARBEQdPhYnLAZHAlogMQQzTTQ6E05oSQIHXR0WJGMgKxZ2OhM%2FGDAZSkcUHiQlACsQPDoTTmhJMAZWHxwoLQwhKXpKbUBBBSENVBMUJCc1Zyh0OhNWaElpNBBKJmNvNWcBKhNUPhZHGUoKJlgcYUVnATFEC0BAXiwSRkwONzkaN0BhCV4GXwJzWwJKEHI5WzYFIF8BAAVfZ0QQCVh7YQ8jETpVVwBVUiBeB05LdnBQdkxrVABbBlgnUFNCH3R1RHIeNQscN3EtD0oeWBkzN0t%2FV2lTBFEHWXJbBUxDeXBLaVc6DlVADjBnWQdPSXJxXnZDYVIIUhZHZ1gQVlhzYUVnRGlXE04WXndEBkpIbXFfcEVjUwNOAFt3RAdDQ3ZhRWdHa14dVgVaaV8ATk16cVp9WWxXAE4DWH1bCUhJeW9ddER0UQVUA1B3WwVWTnByRXJBYFITThYfZ0QQSlZxb1lpRXRWHVIYW2dEEFZWbW9FaVcFShMGRwVnUhAeTTl0XnxDKkQdQFAfI0oIWEt4c0tpVzEVE1gWWmcV%22%2C%22requestId%22%3A%22d03a09c66d2240459f0774262cfba6ed%22%2C%22captcha_data%22%3A%22%7B%5C%22sceneId%5C%22%3A%20%5C%22PAIPAI%5C%22%2C%20%5C%22sig%5C%22%3A%20%5C%22eRlxMk1SaHne2CRzSU5vP6tvWnOWIBH2Z9JyIsFggBSRboCx%5C%22%2C%20%5C%22data%5C%22%3A%20%5C%22185.33333587646484-5571%5C%22%7D%22%7D&state=1&p=4

'''
# --*-- coding:utf-8 --*--
import ssl
import string
import urllib.parse as urllib1
import urllib.request as urllib3


url = "https://hsb.jd.com/compute" 
values = {
"attr":"742-3800-1%2C315-2021-1%2C314-2014-1%2C456-2452-1%2C333-2072-1%2C316-2026-2%2C343-2100-2%2C352-2124-2%2C351-2118-2%2C350-2114-2%2C332-2067-2%2C580-3168-4%2C353-2130-4%2C355-2134-4%2C1279-6982-4%2C325-2045-4%2C344-2102-4%2C345-2104-4%2C347-2108-4%2C1268-6947-4%2C529-2808-4",
"pid":"153936",
"vid":"200101",
"inquiryRelType":"1",
"wid":"17726",
"inquiryKey":"",
"token":"%7B%22token%22%3A%2288f6155fa2404fdab9ea887a6c2d801a-f38b-UEFJ~NkwFPxZeagoCcHJBQGBde2FMGRZHRnIaEG1pBywgSmNvCE1lFgI4GghjKUdGMwptLFdfeVddKVlRci5HR2dda3RaXS8GVioJVnM4AkJpBTJ8HE1lFhEXXRB7aSovcjR7YTJNL2hGZGNuY3hHQwxKdRFMWX0MOGoUbmN4R0MMSnURTFl9DDhqFG5jPh8XNQ4wIwsLFRZIFBpHLy8UFTkGPCkyTWVoRnhkEG0XU0MMSnURTFx%2FBDhqFG5jfENDDEp1EUxcfwQ4ahRuY3xDQwxKBGE1M2tODGV7fB1pXS9yHTcpCwkgWgEsZBBtF1MGPgw8KwcBLFA4ahRuYz4fFzUOMCMLCxUWSBQaRy8vFBU5BjwpMk1laEYEUVw0M1ESIgUvdQIzaxg4an9dLiwdFnAhNy5AM2tpSBNkEDQlFRY2ATcoCjNrGDhqTVwlLhcaPg09EUxDFRYRJlxXJyIfFjQ0exBCM2sAOGoUbmN7LVF8NHs5HBosaEZkZBB5F1MuckR7OQdNcxZUfghLeTEcEjsZaSpaGX9OVTFWCy94FEUjXzwhWxYlQlV%2BGh5jOFNJclBhK1hefAECKQoGcX8XFzEKYCgPV3EDBX5bACVzQUIxRT9%2BVg1kYSEOchBtaRIBJEpjb19afAdXewEDeXhGRmRKdW8MBy0WXhMaA3R%2BQkBjUWh6V11%2BBkZkGgJjZ1NCckR7eFdNZRZReBQGcHhdQWlfbm9CTXgBVGQMA3VnRUFnUGJ8W19lAFV8FAZye0hIYV1oYVpefRhQewADenpEQnxcaHhCW3oNUGoUEDVpXVFgRGlhXkN5GFRkCB5xaV1RfER1YUJDa2lIalxBL2lLUTkdaS5fVz9RRmQaVjUtU0lyWWt6TENrXRdqAhBwaQw%3D%22%2C%22requestId%22%3A%22b6289178e60e4776bb27939471fa4bd6%22%2C%22captcha_data%22%3A%22%7B%5C%22sceneId%5C%22%3A%20%5C%22PAIPAI%5C%22%2C%20%5C%22sig%5C%22%3A%20%5C%22HTuuEBaftI0yrEydingmxHFSMluOSnErr4MX623svccHsBXr%5C%22%2C%20%5C%22data%5C%22%3A%20%5C%22101.00000762939453-5735%5C%22%7D%22%7D",
"state":"1",
"p":"4"
}

##for key in values:
#    values[key] = urllib1.unquote(values[key]) 

headers = {
"Host": "hsb.jd.com",
"Connection": "keep-alive",
"Content-Length": "1622",
"Accept": "application/json, text/plain, */*",
"Origin": "https://huishou.m.jd.com",
"User-Agent": "Mozilla/5.0 (Linux; Android 9; BKL-AL00 Build/HUAWEIBKL-AL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/66.0.3359.126 MQQBrowser/6.2 TBS/044506 Mobile Safari/537.36 MMWEBID/2835 MicroMessenger/7.0.3.1400(0x2700033B) Process/tools NetType/WIFI Language/zh_CN",
"Content-Type": "application/x-www-form-urlencoded",
"Referer": "https://huishou.m.jd.com/orderInfo?pid=153936&inquiryRelType=1&vid=200101&wid=17726&vender=1",
"Accept-Encoding": "gzip, deflate, br",
"Accept-Language": "zh-CN,en-US;q=0.9",
"Cookie": "__jdv=122270672|direct|-|none|-|1553327344874; __jdc=122270672; mba_muid=15533273448722125498609; rurl=%2F%2Fwq.jd.com%2Fpinbind%2FpinTokenRedirect%3Ftype%3D1%26biz%3Dhuishou%26rurl%3Dhttps%253A%252F%252Fhuishou.m.jd.com%252ForderInfo%253Fpid%253D153936%2526inquiryRelType%253D1%2526vid%253D200101%2526wid%253D17726%2526vender%253D1%26scope%3D0%26sceneid%3D9001%26btnTips%3D%26hideApp%3D0; TrackID=KAhoZ7OV8vSM9GktY5be8UW1a6poShZDW7jqr-6m_ROC1SKhkEFYIlik8GT_ELLeIyPZI0cgUtjNCP3DMX5FHqnqO2W2ttLZZ2giuCbWixmcuUYYEtOfplyJ99p3KRs7pCRqKPmksJe-KBQPe-Ygtw; buy_uin=4890942622; jdpin=gaussgao; nickname_base64=6auY5pav; open_id=oTGnpnJNfKi0gWEhHPdT7pUBKQZ8; picture_url=http%3A%2F%2Fthirdwx.qlogo.cn%2Fmmopen%2FywQD5Z4f8lyk4wXnJZGKlszOkSdC4oZBIYPGucouEQDCqBozH2nEWdoicv9kyRd80CqRJXUibREibqTF0U2OB6tib3zkH0Wmmv7M%2F132; pin=gaussgao; pinId=aQ8ynUfDlrC1ffsfn98I-w; pinsign=d7c484dc119202db30e4b93dc7fa7432; sex=1; wq_uin=4890942622; wq_unionid=oCwKwuL_vxklKc1NEdYbcRr3wOQM; wx_nickname=%E9%AB%98%E6%96%AF; openid2=2569931EA1803F2135F857BC19629B005A0C928D07BA15B45649A5DD2FACD8C29312FFCAEDCDF61119DF127B80EACEF0; wq_skey=za4C9C52E4EB1177449013CEC85D3153F6A22657DF72B25F1205201FB59DCF0CB50838E8EB5D51ED980B9A848512BF1B6B731B867E1D297EE1ACF52F9483D3F762372982D8A5D7F49627877902F7EED8A7; wq_auth_token=49003881B187EDFBEA9E395D97D5AEF9AB041FBC95DBACBE40C52B3CFB2C9417; __jda=122270672.15533273448722125498609.1553327344.1553339138.1553341242.3; __jdb=122270672.3.15533273448722125498609|3.1553341242; mba_sid=15533412427291945511739629450.3; 3AB9D23F7A4B3C9B=NQ3KOA4FQ3XMPTW76YNNEYB5X3F564ET6VLP5TQLFRCDS342LPHNZ464MLAANP2FMMDNEYPTE3GALXX54HJREHYWNQ",
"X-Requested-With": "com.tencent.mm"
}

data = urllib1.urlencode(values).encode("utf-8")#请求post表单数据

data ="attr=742-3800-1%2C315-2021-1%2C314-2014-1%2C456-2452-1%2C333-2072-1%2C316-2026-2%2C343-2100-2%2C352-2124-2%2C351-2118-2%2C350-2114-2%2C332-2067-2%2C580-3168-4%2C353-2130-4%2C355-2134-4%2C1279-6982-4%2C325-2045-4%2C344-2102-4%2C345-2104-4%2C347-2108-4%2C1268-6947-4%2C529-2808-4&pid=153936&vid=200101&inquiryRelType=1&wid=17726&inquiryKey=&token=%7B%22token%22%3A%22cd7a82ea5928411490f0c90d6fa95efb-h369-UEFJ~FBoDBWUIVHpRRA54XH1sUUMaHyw0EExqQ1kVPjA9e0lNXktfZVQGaltXVX5aLjtHDgFZQyQLFykCRlJ%2BW3psQVYMWxV1ABR5BUdEO150NBheSktfZUcpLUNPFRMzbwVRQ2RLFRsQWhM9VwR%2BXxF7XzMaX0d%2FblRkPVcEfl8Re18zGl9Hf25UZD1XQiYLKD8aAV0NL2UeKmoUG1MtCSQ3FgtkS18bEEYUQ1lral8Re18zGlpFd25UZD1XAHpfEXtfMxpaRXduVGQ9VwB6XxF7LkNjNVE9WlsLLykVZDNvLB0LXQ8aKVcSFENZa2oaIz0WCVEHFiNuVGQ9V0ImCyg%2FGgFdDS9lHipqFBtTLQkkNxYLZEtfGxA6IQ8AT2gOPzQFV1Q1UWtuVA8OGlAkCm0QHQwWNVEaHi0UQwBZLAorMB0KXDVRa25UPQ8RUi4GIzwXMxpFL2VHGCwEE14mCikFUTIUNVF0blRkPVcHFE1hBVEbShwWGxBaFENNa2oyb3VRG1FLSWVTEz5VFgR6CCkjEhVRUBkkWBoiBQZOfwkqOEIeTlkUPgNAak1XRGpVbzoXWFlRQSJTQ3FTTQN5XnlgQwkICkp3VkAuAEwCLQkvdBtcDlBeEncwAkNZFSsdOXtJTQlcRnQBQnlTQAN7XH97X01aARdlCC1qUEACe1x5aEFaCFBKfhBaalFXG2peb3VRWg1LX2UHQmRVRQRkXX1tRU0US0B3A1p8UEwbe11%2BaEhcCFhfcwNPZFJHA3lUfmlBQwxYSmsBRH1ZTgR4XWFtQlYUWkF%2BAFRkQwEVZE19dUNDCEVDawJaeE1FFWRNYXVfQxRFURoeVCwSGxVyTSM3R1xdEAUiEFpqBQFRalVvbUNNFEsaNBBMalBXSg%3D%3D%22%2C%22requestId%22%3A%22965acf80ecd344508acfa7ec88fef931%22%2C%22captcha_data%22%3A%22%7B%5C%22sceneId%5C%22%3A%20%5C%22PAIPAI%5C%22%2C%20%5C%22sig%5C%22%3A%20%5C%22mnkUrvRqW2SVsY8R9VIMPcprzHH5YkO6AgK9Z3qJlqybhHVG%5C%22%2C%20%5C%22data%5C%22%3A%20%5C%22247.66667556762695-5626%5C%22%7D%22%7D&state=1&p=4"

data = data.encode("utf-8")
req = urllib3.Request(url,data,headers)#请求数据)

#proxy_handler = urllib3.ProxyHandler({'https': 'https://127.0.0.1:8888'})#抓包
#opener = urllib3.build_opener(proxy_handler)
#urllib3.install_opener(opener)#启用post请求

context = ssl._create_unverified_context()#启用ssl
response = urllib3.urlopen(req)#在urllib3启用ssl字段,打开请求的数据
the_page = response.read()#读取并缓存请求到的数据



print(the_page)


response = urllib3.urlopen(req)#在urllib3启用ssl字段,打开请求的数据
the_page = response.read()#读取并缓存请求到的数据



print(the_page)




from request import Request, Session

s = Session()

req = Request('POST', url, data=data, headers=headers)
prepped = req.prepare()

# do something with prepped.body
prepped.body = 'No, I want exactly this as the body.'

# do something with prepped.headers
del prepped.headers['Content-Type']

resp = s.send(prepped,
    stream=stream,
    verify=verify,
    proxies=proxies,
    cert=cert,
    timeout=timeout
)

print(resp.status_code)

